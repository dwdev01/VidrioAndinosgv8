{#
/**
 * @file
 * Default theme implementation to display a single page.
 *
 * The doctype, html, head and body tags are not in this template. Instead they
 * can be found in the html.html.twig template in this directory.
 *
 * Available variables:
 *
 * General utility variables:
 * - base_path: The base URL path of the Drupal installation. Will usually be
 *   "/" unless you have installed Drupal in a sub-directory.
 * - is_front: A flag indicating if the current page is the front page.
 * - logged_in: A flag indicating if the user is registered and signed in.
 * - is_admin: A flag indicating if the user has permission to access
 *   administration pages.
 *
 * Site identity:
 * - front_page: The URL of the front page. Use this instead of base_path when
 *   linking to the front page. This includes the language domain or prefix.
 *
 * Page content (in order of occurrence in the default page.html.twig):
 * - messages: Status and error messages. Should be displayed prominently.
 * - node: Fully loaded node, if there is an automatically-loaded node
 *   associated with the page and the node ID is the second argument in the
 *   page's path (e.g. node/12345 and node/12345/revisions, but not
 *   comment/reply/12345).
 *
 * Regions:
 * - page.header: Items for the header region.
 * - page.breadcrumb: Items for the breadcrumb region. 
 * - page.banner: Items for the banner region.
 * - page.content: The main content of the current page.
 * - page.sidebar: Items for the sidebar.
 * - page.footer-first: Items for the footer first region.
 * - page.footer-second: Items for the footer second region.
 * - page.footer-third: Items for the footer third region.
 * - page.footer: Items for the footer region.
 *
 * @see template_preprocess_page()
 * @see html.html.twig
 *
 * @ingroup themeable
 */
#}
<style>
  .glider,
  .glider-contain {
    margin: 0 auto;
    position: relative
  }

  .glider,
  .glider-track {
    transform: translateZ(0)
  }

  .glider-dot,
  .glider-next,
  .glider-prev {
    border: 0;
    padding: 0;
    user-select: none;
    outline: 0
  }

  .glider-contain {
    width: 100%
  }

  .glider {
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: none
  }

  .glider-track {
    width: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    z-index: 1
  }

  .glider.draggable {
    user-select: none;
    cursor: -webkit-grab;
    cursor: grab
  }

  .glider.draggable .glider-slide img {
    user-select: none;
    pointer-events: none
  }

  .glider.drag {
    cursor: -webkit-grabbing;
    cursor: grabbing
  }

  .glider-slide {
    user-select: none;
    justify-content: center;
    align-content: center;
    width: 100%;
    min-width: 150px
  }

  .glider-slide img {
    max-width: 100%
  }

  .glider::-webkit-scrollbar {
    opacity: 0;
    height: 0
  }

  .glider-next,
  .glider-prev {
    position: absolute;
    background: 0 0;
    z-index: 2;
    font-size: 40px;
    text-decoration: none;
    left: -23px;
    top: 30%;
    cursor: pointer;
    color: #666;
    opacity: 1;
    line-height: 1;
    transition: opacity .5s cubic-bezier(.17, .67, .83, .67), color .5s cubic-bezier(.17, .67, .83, .67)
  }

  .glider-next:focus,
  .glider-next:hover,
  .glider-prev:focus,
  .glider-prev:hover {
    color: #ccc
  }

  .glider-next {
    right: -23px;
    left: auto
  }

  .slide-next.disabled,
  .slide-prev.disabled {
    opacity: .25;
    cursor: default
  }

  .glider-hide {
    opacity: 0
  }

  .glider-dots {
    user-select: none;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0 auto;
    padding: 0
  }

  .glider-dot {
    display: block;
    cursor: pointer;
    color: #ccc;
    border-radius: 999px;
    background: #ccc;
    width: 12px;
    height: 12px;
    margin: 7px
  }

  .glider-dot:focus,
  .glider-dot:hover {
    background: #ddd
  }

  .glider-dot.active {
    background: #a89cc8
  }

  @media(max-width:36em) {
    .glider::-webkit-scrollbar {
      opacity: 1;
      -webkit-appearance: none;
      width: 7px;
      height: 3px
    }

    .glider::-webkit-scrollbar-thumb {
      opacity: 1;
      border-radius: 99px;
      background-color: rgba(156, 156, 156, .25);
      -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .25);
      box-shadow: 0 0 1px rgba(255, 255, 255, .25)
    }
  }

  .item::before {
    content: '';
    display: block;
    width: 100%;
    height: 100vh;
    max-height: 600px;
    position: absolute;
    top: 0;
    background-color: black;
    opacity: .5
  }

  #container-loading {
    height: 100%;
    width: 100%;
    transition: all 1s ease;
  }

  #loading {
    border: 15px solid #e2e8f0;
    border-top-color: #ed8936;
    border-top-style: groove;
    height: 80px;
    width: 80px;
    border-radius: 100%;
    margin: 0 auto;
    animation: girar 1.5s linear infinite;
  }

  @keyframes girar {
    from {
      transform: rotate(0deg)
    }

    to {
      transform: rotate(360deg)
    }
  }

  .fade-enter-active,
  .fade-leave-active {
    transition: opacity .5s
  }

  .fade-enter,
  .fade-leave-to {
    opacity: 0
  }
</style>

<header role="header" class="shadow-md transition-all duration-300 fixed w-full bg-white z-50">
  {{ page.header }}
</header>

{{page.banner}}

<div class="container grid grid-cols-12 gap-4 my-12">

  <main role="main" class="col-span-9 my-12">
    <a id="main-content" tabindex="-1"></a>{# link is in html.html.twig #}
    <div>
      {{ page.content }}
    </div>
    {# /.layout-content #}
  </main>

  {% if page.sidebar %}
  <aside class="col-span-3 my-12" role="complementary">
    {{ page.sidebar }}
  </aside>
  {% endif %}
</div>
{# {% if page.footer %} #}
<footer role="footer" class="py-6 bg-gray-900 text-white">
  <div class="container px-6 py-6 md:px-4 sm:flex sm:flex-col md:grid md:grid-cols-3 md:gap-24">
    <div class="pb-6">
      {{ page.footer_firts }}
    </div>
    <div class="pb-6">
      {{ page.footer_second }}
    </div>
    <div>
      {{ page.footer_third }}
    </div>
  </div>
  {{ page.footer }}
</footer>
{# {% endif %} #}

</div>{# /.layout-container #}

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/es.js"></script>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('breadcrumbDescription').parentElement.style.display = "none"
  })
  // Vuejs banner
  let banner = new Vue({
    el: "#bannerBlog",
    data() {
      return {
        content: null,
        url: window.location.origin,
        index: 0
      }
    },
    mounted() {
      axios
        .get("https://sgvad8.vidrioandino.com/api/blog_post?_format=json")
        .then(response => {
          let randomNumber = Math.floor(Math.random() * response.data.length)
          randomNumber = randomNumber === 0 ? 1 : randomNumber
          this.content = [response.data[0], response.data[randomNumber]]

        })
        .catch(error => {
          console.log(error)
        })
    },
    methods: {
      addIndex: function() {
        if (this.index == 0) {
          this.index = 1
        }
      },
      subIndex: function() {
        if (this.index == 1) {
          this.index = 0
        }
      }
    }
  })
  // Vuejs app
  let app = new Vue({
    el: "#app",
    data() {
      return {
        posts: null,
        url: window.location.origin,
        loading: true,
        errored: false
      }
    },
    mounted() {
      axios
        .get("https://sgvad8.vidrioandino.com/api/blog_post?_format=json")
        .then(response => {
          this.posts = response.data
          let randomNumber = Math.ceil(Math.random() * response.data.length)
          banner.content = [response.data[0], response.data[randomNumber]]
        })
        .catch(error => {
          console.log(error)
          this.errored = true
        })
        .finally(() => this.loading = false)
    },
    methods: {
      read: function(content) {
        const readPromedio = 250
        const readValue = content.body[0].processed.split(' ').length
        const readResult = Math.ceil(readValue / readPromedio)

        return readResult
      },
      formatDate: function(date) {
        moment.locale('es')
        return moment(date).format("MMM DD YYYY");
      }
    }
  });
</script>